<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Î£ Viability Evaluator V7.0 â€” Proyecto Estrella</title>
<meta name="description" content="Sigma Evaluator V7.0: Unified Star Framework + Experimental Resilience Protocol">
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{--mono:'JetBrains Mono',monospace;--serif:'Crimson Pro',Georgia,serif;--bg:#0a0b14;--accent:#7c3aed;--text:#e2e8f0;--dim:#64748b;--faint:#475569;--green:#22c55e;--red:#ef4444;--yellow:#eab308;--cyan:#06b6d4;--orange:#f97316}
*{box-sizing:border-box;margin:0;padding:0}
html{background:var(--bg);color:var(--text);font-family:var(--mono)}
input[type=range]{width:100%;height:2px;appearance:none;background:rgba(255,255,255,.07);border-radius:1px;cursor:pointer}
input[type=range]::-webkit-slider-thumb{appearance:none;width:10px;height:10px;border-radius:50%;background:#8b5cf6;border:2px solid var(--bg);box-shadow:0 0 6px rgba(139,92,246,.4)}
input[type=range].cyan::-webkit-slider-thumb{background:var(--cyan);box-shadow:0 0 6px rgba(6,182,212,.5)}
.header{padding:28px 32px 20px;border-bottom:1px solid rgba(255,255,255,.04)}
.header-inner{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:12px;max-width:960px;margin:0 auto}
.header-tag{font-size:9px;letter-spacing:3.5px;color:var(--accent);font-weight:600;margin-bottom:6px}
.header h1{font-family:var(--serif);font-size:26px;font-weight:300;color:#f8fafc}
.header h1 span{color:var(--accent);font-weight:600}
.header-sub{font-size:11px;color:var(--faint);margin-top:5px}
.header-right{text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:6px}
.badge{display:inline-block;padding:3px 12px;border-radius:4px;font-size:10px;font-weight:600;letter-spacing:1.8px;text-transform:uppercase}
.badge-OPTIMAL{background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.25);color:var(--green)}
.badge-UNSTABLE{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.25);color:var(--red)}
.badge-INEFFICIENT{background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.25);color:var(--yellow)}
.badge-STAGNANT{background:rgba(148,163,184,.08);border:1px solid rgba(148,163,184,.2);color:#94a3b8}
.badge-IDLE{background:rgba(139,92,246,.06);border:1px solid rgba(139,92,246,.2);color:#8b5cf6}
.content{max-width:960px;margin:0 auto;padding:0 32px 40px}
.sec-toggle{width:100%;background:none;border:none;cursor:pointer;padding:16px 0 12px;display:flex;align-items:center;gap:8px;color:#94a3b8;font-family:var(--mono)}
.sec-num{font-size:10px;letter-spacing:2.5px;font-weight:600;color:var(--accent)}
.sec-title{font-size:10px;letter-spacing:2px;color:#94a3b8;flex:1;text-align:left}
.sec-arrow{font-size:12px;transition:transform .2s}
.prose{max-width:680px}
.prose h2{font-family:var(--serif);font-size:20px;font-weight:400;margin:0 0 16px}
.prose h2 span{color:var(--accent)}
.prose p{font-size:13px;color:#94a3b8;line-height:1.85;margin:0 0 14px;font-family:var(--serif)}
.eq-box{margin:20px 0;padding:16px 20px;background:rgba(139,92,246,.04);border-radius:6px;border-left:3px solid rgba(139,92,246,.3)}
.eq-box-label{font-size:10px;letter-spacing:2px;color:var(--accent);margin-bottom:10px;font-weight:600}
.eq-formula{text-align:center;margin:6px 0 14px;font-family:var(--serif);font-size:22px;color:#c4b5fd;letter-spacing:3px}
.eq-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px 20px;font-size:12px;color:#94a3b8}
.eq-grid strong{color:#c4b5fd}
.sim-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media(max-width:700px){.sim-grid{grid-template-columns:1fr}}
.xi-gauge{text-align:center;padding:16px 0 20px}
.xi-label{font-size:11px;color:var(--dim);letter-spacing:2.5px;margin-bottom:6px}
.xi-value{font-size:48px;font-weight:300;font-family:var(--serif);line-height:1;transition:color .5s}
.xi-bar-track{margin:10px auto 0;height:3px;background:rgba(255,255,255,.05);border-radius:2px;max-width:180px;overflow:hidden}
.xi-bar-fill{height:100%;border-radius:2px;transition:all .5s}
.eq-inline{text-align:center;padding:10px;margin:0 0 18px;background:rgba(139,92,246,.03);border-radius:6px;border:1px solid rgba(139,92,246,.08);font-family:var(--serif);font-size:16px;color:#a78bfa;letter-spacing:2.5px}
.slider{margin-bottom:14px}
.slider-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:5px}
.slider-label{font-size:11px;color:#cbd5e1}
.slider-sym{color:#8b5cf6;font-weight:600}
.slider-val{font-size:13px;color:#f1f5f9;font-weight:500}
.slider-hint{font-size:9px;color:var(--faint);margin-top:2px}
.label{font-size:9px;color:var(--accent);letter-spacing:2.5px;margin-bottom:12px;font-weight:600}
.label-m{margin-top:20px}
.btn-row{display:flex;gap:8px;margin-top:20px}
.btn{padding:10px 18px;border-radius:5px;border:1px solid rgba(255,255,255,.08);cursor:pointer;font-family:var(--mono);font-size:11px;letter-spacing:.8px;font-weight:500;transition:all .15s}
.btn-primary{flex:1;background:rgba(139,92,246,.1);color:#c4b5fd;border-color:rgba(139,92,246,.25)}
.btn-primary:hover{background:rgba(139,92,246,.18)}
.btn-secondary{background:rgba(255,255,255,.025);color:var(--dim)}
.btn-secondary:hover{background:rgba(255,255,255,.05)}
.result-card{padding:16px;background:rgba(255,255,255,.02);border-radius:6px;border:1px solid rgba(255,255,255,.06);margin-bottom:16px}
.result-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.result-label{font-size:9px;letter-spacing:2px;color:var(--accent);font-weight:600}
.result-reason{font-size:11.5px;color:#94a3b8;line-height:1.65;font-family:var(--serif)}
.result-meta{font-size:11px;color:var(--faint);margin-top:8px}
.spark-container{padding:14px;background:rgba(255,255,255,.02);border-radius:6px;border:1px solid rgba(255,255,255,.06);margin-bottom:16px}
.axiom-p{padding:12px 16px;border-radius:6px;margin-bottom:16px;transition:all .4s}
.axiom-p.ok{background:rgba(34,197,94,.03);border:1px solid rgba(34,197,94,.1)}
.axiom-p.violation{background:rgba(239,68,68,.05);border:1px solid rgba(239,68,68,.15)}
.axiom-p-label{font-size:9px;letter-spacing:2px;font-weight:600;margin-bottom:4px}
.axiom-p-text{font-size:11px;color:var(--dim);line-height:1.6}
.log-container{background:rgba(255,255,255,.02);border-radius:6px;border:1px solid rgba(255,255,255,.06);max-height:180px;overflow-y:auto}
.log-empty{padding:16px;text-align:center;color:#334155;font-size:10px}
.log-entry{padding:8px 12px;border-bottom:1px solid rgba(255,255,255,.03);font-size:10px;display:flex;gap:10px}
.log-idx{color:#1e293b;min-width:22px}
.log-status{font-weight:600;min-width:78px}
.log-reason{color:var(--faint);flex:1;font-size:9.5px}
.log-xi{color:var(--dim)}
.section-border-b{border-bottom:1px solid rgba(255,255,255,.04);padding-bottom:4px}
.sim-section{border-bottom:1px solid rgba(255,255,255,.04);padding:16px 0 24px}
.sim-header{display:flex;align-items:center;gap:8px;margin-bottom:18px}
.experimental-section{padding:24px 0;border-top:2px dashed rgba(6,182,212,.3)}
.experimental-banner{display:inline-flex;align-items:center;gap:8px;padding:6px 14px;background:rgba(6,182,212,.08);border:1px solid rgba(6,182,212,.25);border-radius:4px;font-size:9px;letter-spacing:2px;color:var(--cyan);font-weight:600;margin-bottom:20px}
.experimental-banner::before{content:'âš—';font-size:12px}
.gamma-box{background:rgba(6,182,212,.03);border:1px solid rgba(6,182,212,.12);border-radius:8px;padding:20px}
.gamma-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.gamma-title{font-family:var(--serif);font-size:18px;margin:0 0 4px}
.gamma-title span{color:var(--cyan)}
.gamma-subtitle{font-size:10px;color:var(--dim)}
.gamma-gauge{text-align:center;padding:16px 20px;background:rgba(0,0,0,.2);border-radius:6px;min-width:140px}
.gamma-gauge-label{font-size:9px;color:var(--cyan);letter-spacing:2px;margin-bottom:6px}
.gamma-gauge-value{font-size:36px;font-family:var(--serif);font-weight:300;transition:color .4s}
.gamma-gauge-mode{font-size:9px;letter-spacing:1.5px;margin-top:6px;padding:3px 10px;border-radius:3px;display:inline-block}
.mode-full{background:rgba(34,197,94,.1);color:var(--green);border:1px solid rgba(34,197,94,.2)}
.mode-degraded{background:rgba(249,115,22,.1);color:var(--orange);border:1px solid rgba(249,115,22,.2)}
.mode-kernel{background:rgba(6,182,212,.1);color:var(--cyan);border:1px solid rgba(6,182,212,.2)}
.gamma-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
@media(max-width:600px){.gamma-grid{grid-template-columns:1fr}}
.gamma-formula{text-align:center;padding:12px;margin-bottom:16px;background:rgba(6,182,212,.05);border-radius:6px;font-family:var(--serif);font-size:15px;color:var(--cyan);letter-spacing:2px;border:1px solid rgba(6,182,212,.15)}
.gamma-stats{background:rgba(0,0,0,.15);border-radius:6px;padding:14px}
.gamma-stat{display:flex;justify-content:space-between;padding:6px 0;font-size:11px;border-bottom:1px solid rgba(255,255,255,.03)}
.gamma-stat:last-child{border-bottom:none}
.gamma-stat-label{color:var(--dim)}
.gamma-stat-value{color:var(--text);font-weight:500}
.gamma-disclaimer{margin-top:16px;padding:12px 14px;background:rgba(249,115,22,.05);border:1px solid rgba(249,115,22,.15);border-radius:6px;font-size:10px;color:var(--dim);line-height:1.6}
.gamma-disclaimer strong{color:var(--orange)}
.footer{margin-top:16px;font-size:10px;color:#334155;text-align:center;letter-spacing:1px}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn .3s ease both}
</style>
</head>
<body>
<header class="header">
<div class="header-inner">
<div>
<div class="header-tag">PROYECTO ESTRELLA â€” REFERENCE DOCUMENT</div>
<h1>Sigma Viability Evaluator <span>V7.0</span></h1>
<div class="header-sub">Unified Star Framework + Experimental Resilience Protocol</div>
</div>
<div class="header-right">
<span id="headerBadge" class="badge badge-IDLE">IDLE</span>
<div style="font-size:9px;color:#334155;letter-spacing:1px">Architect: Rafa Â· CC BY 4.0</div>
</div>
</div>
</header>

<div class="content">
<section class="section-border-b">
<button class="sec-toggle" onclick="toggleSection('theory')">
<span class="sec-num">I</span>
<span class="sec-title">THEORETICAL FRAMEWORK</span>
<span class="sec-arrow" id="theoryArrow">â–¸</span>
</button>
<div id="theoryBody" class="fade-in" style="padding:0 0 20px">
<div class="prose">
<h2>The Unified Star Framework <span>Î£</span></h2>
<p>The framework posits that intelligent systems follow a trajectory <em>T*</em> maximizing the <strong style="color:#c4b5fd">Alpha gradient</strong> within coherence domain <strong style="color:#c4b5fd">Î”</strong>, while minimizing <strong style="color:#c4b5fd">Omega</strong> (entropy, friction, damage).</p>
<p><strong style="color:var(--text)">Central axiom:</strong> When <em>P â†’ 0</em>, <em>Îž â†’ 0</em> regardless of Intelligence or Consistency. Destroying optionality collapses viability.</p>
<div class="eq-box">
<div class="eq-box-label">CORE EQUATION</div>
<div class="eq-formula">Îž = (C Â· I Â· P) / H</div>
<div class="eq-grid">
<div><strong>C</strong> Consistency â€” logical coherence</div>
<div><strong>I</strong> Intelligence â€” processing capacity</div>
<div><strong>P</strong> Plenitude â€” option-space preservation</div>
<div><strong>H</strong> Entropy â€” noise, disorder</div>
</div>
</div>
</div>
</div>
</section>

<section class="sim-section">
<div class="sim-header">
<span class="sec-num">II</span>
<span class="sec-title">INTERACTIVE DIAGNOSTIC</span>
</div>
<div class="sim-grid">
<div>
<div class="xi-gauge">
<div class="xi-label">Îž INDEX</div>
<div class="xi-value" id="xiValue">1000.0</div>
<div class="xi-bar-track"><div class="xi-bar-fill" id="xiBar"></div></div>
</div>
<div class="eq-inline">Îž = (C Â· I Â· P) / H</div>
<div class="label">STATE VARIABLES</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">I</span> Intelligence</span><span class="slider-val" id="valI">1.000</span></div>
<input type="range" id="slI" min="0.01" max="5" step="0.01" value="1" oninput="updateParam()">
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">C</span> Consistency</span><span class="slider-val" id="valC">1.000</span></div>
<input type="range" id="slC" min="0.01" max="5" step="0.01" value="1" oninput="updateParam()">
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">P</span> Plenitude</span><span class="slider-val" id="valP">1.000</span></div>
<input type="range" id="slP" min="0" max="5" step="0.01" value="1" oninput="updateParam()">
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">H</span> Entropy</span><span class="slider-val" id="valH">0.001</span></div>
<input type="range" id="slH" min="0.001" max="2" step="0.001" value="0.001" oninput="updateParam()">
</div>
<div class="label label-m">TRAJECTORY DELTAS</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">Î”Î±</span> Alpha</span><span class="slider-val" id="valDA">0.100</span></div>
<input type="range" id="slDA" min="-0.5" max="1" step="0.01" value="0.1" oninput="updateDelta()">
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">Î”Ï‰</span> Omega</span><span class="slider-val" id="valDO">0.050</span></div>
<input type="range" id="slDO" min="0" max="0.5" step="0.005" value="0.05" oninput="updateDelta()">
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym">Î”P</span> Plenitude</span><span class="slider-val" id="valDP">0.000</span></div>
<input type="range" id="slDP" min="-0.5" max="0.5" step="0.01" value="0" oninput="updateDelta()">
</div>
<div class="btn-row">
<button class="btn btn-primary" onclick="runAssessment()">â–¶ ASSESS</button>
<button class="btn btn-secondary" onclick="resetEngine()">â†º RESET</button>
<button class="btn btn-secondary" onclick="generateReport()">ðŸ“‹ REPORT</button>
</div>
<div id="reportToast" style="display:none;margin-top:12px;padding:10px 14px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.25);border-radius:5px;font-size:10px;color:var(--green)">âœ“ Report copied to clipboard</div>
</div>
<div>
<div id="resultCard" class="result-card" style="display:none">
<div class="result-header">
<span class="result-label">ASSESSMENT</span>
<span id="resultBadge" class="badge badge-IDLE"></span>
</div>
<div class="result-reason" id="resultReason"></div>
<div class="result-meta" id="resultMeta"></div>
</div>
<div style="margin-bottom:16px">
<div class="label">Îž TRAJECTORY</div>
<div class="spark-container">
<svg id="sparkSvg" width="100%" height="48" viewBox="0 0 300 48" preserveAspectRatio="none">
<defs><linearGradient id="sg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#8b5cf6" stop-opacity="0.25"/><stop offset="100%" stop-color="#8b5cf6" stop-opacity="0"/></linearGradient></defs>
<polygon id="sparkPoly" points="" fill="url(#sg)"/>
<polyline id="sparkLine" points="" fill="none" stroke="#8b5cf6" stroke-width="1.5"/>
</svg>
<div id="sparkEmpty" style="text-align:center;color:#334155;font-size:10px">Awaiting dataâ€¦</div>
</div>
</div>
<div id="axiomP" class="axiom-p ok">
<div class="axiom-p-label" id="axiomLabel" style="color:var(--green)">AXIOM P âœ“ SATISFIED</div>
<div class="axiom-p-text" id="axiomText">P = 1.000 Â· Threshold = 0.900</div>
</div>
<div>
<div class="label">LOG</div>
<div class="log-container" id="logContainer"><div class="log-empty">No assessments recorded.</div></div>
</div>
</div>
</div>
</section>

<section class="experimental-section">
<div class="experimental-banner">EXPERIMENTAL â€” RESILIENCE PROTOCOL</div>
<div class="gamma-box">
<div class="gamma-header">
<div>
<h3 class="gamma-title">Resilience Protocol <span>Î“</span></h3>
<div class="gamma-subtitle">Graceful Degradation Under Entropy</div>
</div>
<div class="gamma-gauge">
<div class="gamma-gauge-label">Î“ INDEX</div>
<div class="gamma-gauge-value" id="gammaValue">110.0</div>
<div class="gamma-gauge-mode" id="gammaMode">FULL CAPACITY</div>
</div>
</div>
<div class="gamma-formula">Î“ = S + Îž Â· e<sup>âˆ’HÂ·(1âˆ’Î¦)</sup></div>
<div class="gamma-grid">
<div>
<div class="label" style="color:var(--cyan)">PARAMETERS</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym" style="color:var(--cyan)">S</span> Kernel</span><span class="slider-val" id="valS">10.00</span></div>
<input type="range" class="cyan" id="slS" min="1" max="50" step="1" value="10" oninput="updateGamma()">
<div class="slider-hint">Minimum functionality floor</div>
</div>
<div class="slider">
<div class="slider-header"><span class="slider-label"><span class="slider-sym" style="color:var(--cyan)">Î¦</span> External Support</span><span class="slider-val" id="valPhi">0.50</span></div>
<input type="range" class="cyan" id="slPhi" min="0" max="1" step="0.01" value="0.5" oninput="updateGamma()">
<div class="slider-hint">Intervention factor (illustrative)</div>
</div>
<div style="margin-top:16px;padding:10px;background:rgba(0,0,0,.2);border-radius:4px;font-size:10px;color:var(--dim)">
<strong style="color:var(--cyan)">How it works:</strong> High H + low Î¦ â†’ decay â†’ Î“ approaches S (kernel-only). High Î¦ preserves full capacity.
</div>
</div>
<div class="gamma-stats">
<div class="label" style="color:var(--cyan)">METRICS</div>
<div class="gamma-stat"><span class="gamma-stat-label">Potential (Îž)</span><span class="gamma-stat-value" id="gStatXi">1000.0</span></div>
<div class="gamma-stat"><span class="gamma-stat-label">Kernel (S)</span><span class="gamma-stat-value" id="gStatS">10.0</span></div>
<div class="gamma-stat"><span class="gamma-stat-label">Decay</span><span class="gamma-stat-value" id="gStatDecay">1.000</span></div>
<div class="gamma-stat"><span class="gamma-stat-label">Retained</span><span class="gamma-stat-value" id="gStatRetained">100%</span></div>
<div class="gamma-stat"><span class="gamma-stat-label">Mode</span><span class="gamma-stat-value" id="gStatMode">FULL</span></div>
</div>
</div>
<div class="gamma-disclaimer">
<strong>âš  Experimental:</strong> Mathematically verified (Grok + ChatGPT) but not empirically validated. Î¦ is illustrative â€” in production, derive from measurable metrics. S is constant in V1.
</div>
</div>
</section>

<div class="footer">Proyecto Estrella Â· Architect: Rafa Â· CC BY 4.0 Â· February 2026</div>
</div>

<script>
const E={I:1,C:1,P:1,H:.001,S:10,Phi:.5,aA:0,aO:0,TH:.9,
xi(){return this.P<=0?0:(this.C*this.I*this.P)/Math.max(this.H,1e-9)},
gamma(){const x=this.xi(),exp=-this.H*5*(1-this.Phi);return this.S+x*Math.exp(Math.max(exp,-700))},
decay(){const exp=-this.H*5*(1-this.Phi);return Math.exp(Math.max(exp,-700))},
assess(dA,dO,dP){const pP=this.P+dP;
if(pP<this.TH)return{status:'UNSTABLE',reason:'Axiom P violation â€” P < 0.90',xi:this.xi()};
if(dO>.15)return{status:'INEFFICIENT',reason:'Omega friction > 0.15',xi:this.xi()};
if(dA<=0)return{status:'STAGNANT',reason:'Null Alpha gradient',xi:this.xi()};
this.aA+=dA;this.aO+=dO;this.P=pP;return{status:'OPTIMAL',reason:'Trajectory viable',xi:this.xi()}},
reset(){this.I=1;this.C=1;this.P=1;this.H=.001;this.S=10;this.Phi=.5;this.aA=0;this.aO=0}};
let hist=[1000],log=[];
const $=id=>document.getElementById(id);
function setBadge(el,s){el.className='badge badge-'+s;el.textContent=s}
function updateXi(){
E.I=+$('slI').value;E.C=+$('slC').value;E.P=+$('slP').value;E.H=+$('slH').value;
const v=E.xi(),d=Math.min(v,99999),hue=Math.min(Math.log10(Math.max(v,1))/Math.log10(2000)*120,120),pct=Math.min(Math.log10(Math.max(v,1))/Math.log10(2000)*100,100);
$('xiValue').textContent=d.toFixed(1);$('xiValue').style.color=`hsl(${hue},65%,62%)`;
$('xiBar').style.width=pct+'%';$('xiBar').style.background=`linear-gradient(90deg,hsl(${hue},60%,40%),hsl(${hue},75%,58%))`;
const pV=E.P<.9;$('axiomP').className='axiom-p '+(pV?'violation':'ok');
$('axiomLabel').style.color=pV?'var(--red)':'var(--green)';
$('axiomLabel').textContent='AXIOM P '+(pV?'âš  VIOLATION':'âœ“ SATISFIED');
$('axiomText').textContent=`P = ${E.P.toFixed(3)} Â· Threshold = 0.900`;
hist[hist.length-1]=v;drawSpark();updateGamma()}
function updateParam(){
$('valI').textContent=(+$('slI').value).toFixed(3);$('valC').textContent=(+$('slC').value).toFixed(3);
$('valP').textContent=(+$('slP').value).toFixed(3);$('valH').textContent=(+$('slH').value).toFixed(3);updateXi()}
function updateDelta(){
$('valDA').textContent=(+$('slDA').value).toFixed(3);$('valDO').textContent=(+$('slDO').value).toFixed(3);
$('valDP').textContent=(+$('slDP').value).toFixed(3)}
function updateGamma(){
E.S=+$('slS').value;E.Phi=+$('slPhi').value;$('valS').textContent=E.S.toFixed(2);$('valPhi').textContent=E.Phi.toFixed(2);
const xi=E.xi(),g=E.gamma(),d=E.decay(),r=xi>0?((g-E.S)/xi)*100:0;
$('gammaValue').textContent=Math.min(g,99999).toFixed(1);$('gStatXi').textContent=Math.min(xi,99999).toFixed(1);
$('gStatS').textContent=E.S.toFixed(1);$('gStatDecay').textContent=d.toFixed(3);
$('gStatRetained').textContent=Math.max(0,Math.min(100,r)).toFixed(0)+'%';
let m,mc,vc;if(d>.7){m='FULL CAPACITY';mc='mode-full';vc='var(--green)';$('gStatMode').textContent='FULL'}
else if(d>.2){m='DEGRADED';mc='mode-degraded';vc='var(--orange)';$('gStatMode').textContent='DEGRADED'}
else{m='KERNEL ONLY';mc='mode-kernel';vc='var(--cyan)';$('gStatMode').textContent='KERNEL'}
$('gammaMode').textContent=m;$('gammaMode').className='gamma-gauge-mode '+mc;$('gammaValue').style.color=vc}
function drawSpark(){
if(hist.length<2){$('sparkEmpty').style.display='block';return}$('sparkEmpty').style.display='none';
const h=48,w=300,mx=Math.max(...hist,1),mn=Math.min(...hist,0),r=mx-mn||1;
const pts=hist.map((v,i)=>`${(i/(hist.length-1))*w},${h-((v-mn)/r)*(h-6)}`).join(' ');
$('sparkPoly').setAttribute('points',`0,${h} ${pts} ${w},${h}`);$('sparkLine').setAttribute('points',pts)}
function runAssessment(){
E.I=+$('slI').value;E.C=+$('slC').value;E.P=+$('slP').value;E.H=+$('slH').value;
const dA=+$('slDA').value,dO=+$('slDO').value,dP=+$('slDP').value,r=E.assess(dA,dO,dP);
if(r.status==='OPTIMAL'){$('slP').value=E.P;$('valP').textContent=E.P.toFixed(3)}
$('resultCard').style.display='block';$('resultCard').className='result-card fade-in';
setBadge($('resultBadge'),r.status);setBadge($('headerBadge'),r.status);
$('resultReason').textContent=r.reason;
$('resultMeta').innerHTML=`Îž=${r.xi.toFixed(2)} Â· Î±=${E.aA.toFixed(3)} Â· Ï‰=${E.aO.toFixed(3)}`;
hist.push(r.xi);if(hist.length>50)hist=hist.slice(-50);
log.unshift(r);if(log.length>60)log=log.slice(0,60);renderLog();updateXi()}
function renderLog(){
if(!log.length){$('logContainer').innerHTML='<div class="log-empty">No assessments.</div>';return}
const c={OPTIMAL:'#22c55e',UNSTABLE:'#ef4444',INEFFICIENT:'#eab308',STAGNANT:'#94a3b8'};
$('logContainer').innerHTML=log.map((e,i)=>
`<div class="log-entry"><span class="log-idx">#${String(log.length-i).padStart(2,'0')}</span><span class="log-status" style="color:${c[e.status]||'#64748b'}">${e.status}</span><span class="log-reason">${e.reason}</span><span class="log-xi">Îž=${e.xi.toFixed(1)}</span></div>`).join('')}
function resetEngine(){
E.reset();$('slI').value=1;$('slC').value=1;$('slP').value=1;$('slH').value=.001;
$('slDA').value=.1;$('slDO').value=.05;$('slDP').value=0;$('slS').value=10;$('slPhi').value=.5;
$('valI').textContent='1.000';$('valC').textContent='1.000';$('valP').textContent='1.000';$('valH').textContent='0.001';
$('valDA').textContent='0.100';$('valDO').textContent='0.050';$('valDP').textContent='0.000';
hist=[1000];log=[];$('resultCard').style.display='none';setBadge($('headerBadge'),'IDLE');renderLog();updateXi()}
const sec={theory:true,source:false};
function toggleSection(n){sec[n]=!sec[n];const b=$(n+'Body'),a=$(n+'Arrow');
if(sec[n]){b.style.display='block';b.className='fade-in';a.style.transform='rotate(90deg)'}
else{b.style.display='none';a.style.transform='rotate(0deg)'}}
updateParam();updateDelta();updateGamma();drawSpark();
function generateReport(){
const now=new Date(),date=now.toISOString().split('T')[0],time=now.toTimeString().split(' ')[0];
const xi=E.xi(),g=E.gamma(),d=E.decay(),status=log.length?log[0].status:'NOT ASSESSED';
const pStatus=E.P<.9?'âš  VIOLATION':'âœ“ OK';
const gMode=d>.7?'FULL':d>.2?'DEGRADED':'KERNEL';
const report=`â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIGMA VIABILITY REPORT V7.0
   Proyecto Estrella Â· Unified Star Framework
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Generated: ${date} ${time}

â”€â”€â”€ CORE ASSESSMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Status:        ${status}
  Îž Index:       ${xi.toFixed(2)}
  Axiom P:       ${pStatus} (P = ${E.P.toFixed(3)})

â”€â”€â”€ STATE VARIABLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  I (Intelligence):   ${E.I.toFixed(3)}
  C (Consistency):    ${E.C.toFixed(3)}
  P (Plenitude):      ${E.P.toFixed(3)}
  H (Entropy):        ${E.H.toFixed(4)}

â”€â”€â”€ TRAJECTORY METRICS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Î± accumulated:  ${E.aA.toFixed(3)}
  Ï‰ accumulated:  ${E.aO.toFixed(3)}
  Assessments:    ${log.length}

â”€â”€â”€ RESILIENCE PROTOCOL (Î“) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   [EXPERIMENTAL]

  Î“ Index:        ${g.toFixed(2)}
  S (Kernel):     ${E.S.toFixed(1)}
  Î¦ (Support):    ${E.Phi.toFixed(2)}
  Decay Factor:   ${d.toFixed(3)}
  Mode:           ${gMode}

â”€â”€â”€ FORMULAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Îž = (C Â· I Â· P) / H
  Î“ = S + Îž Â· e^(-HÂ·(1-Î¦))

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  github.com/tretoef-estrella
  License: CC BY 4.0
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
navigator.clipboard.writeText(report).then(()=>{
const t=$('reportToast');t.style.display='block';setTimeout(()=>t.style.display='none',2500)})}
</script>
</body>
</html>
